require=function e(t,o,c){function i(r,s){if(!o[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(n)return n(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var h=o[r]={exports:{}};t[r][0].call(h.exports,function(e){var o=t[r][1][e];return i(o?o:e)},h,h.exports,e,t,o,c)}return o[r].exports}for(var n="function"==typeof require&&require,r=0;r<c.length;r++)i(c[r]);return i}({bkControl:[function(e,t,o){"use strict";cc._RFpush(t,"a2864/5HpxMQqOfSMRCoyWc","bkControl"),cc.Class({"extends":cc.Component,properties:{act:cc.Animation},onLoad:function(){this.act.play("bk-scroll")}}),cc._RFpop()},{}],boomControl:[function(e,t,o){"use strict";cc._RFpush(t,"f17bbbFNgpHN532up2BK8Jt","boomControl"),cc.Class({"extends":cc.Component,properties:{act:cc.Animation},boom:function(){},onLoad:function(){this.act.play("boom")}}),cc._RFpop()},{}],enemyControl:[function(e,t,o){"use strict";cc._RFpush(t,"459c0raOhND7ZCGFjjbt7r1","enemyControl"),cc.Class({"extends":cc.Component,properties:{act:cc.Animation},fly:function(){this.act.play("enemy-fly")},test:function(){cc.log("a")},onLoad:function(){this.fly()}}),cc._RFpop()},{}],heroControl:[function(e,t,o){"use strict";cc._RFpush(t,"d4075KkCuJEd4a5eUsyY5uI","heroControl"),cc.Class({"extends":cc.Component,properties:{act:cc.Animation},onLoad:function(){this.act.play("hero-fly")},update:function(e){}}),cc._RFpop()},{}],main:[function(e,t,o){"use strict";cc._RFpush(t,"c0343Zi0BFEa5evexTlJ+6i","main"),cc.Class({"extends":cc.Component,properties:{hero:{"default":null,type:cc.Node},enemy:{"default":null,type:cc.Node},bullet:{"default":null,type:cc.Node},boom:{"default":null,type:cc.Node},score_label:{"default":null,type:cc.Node},size:null,speed:3,spCreateEnemy:2,spCreateBullet:.5,bulletArr:[],enemyArr:[],heroIsLife:!0,enemy_score:10,score:0},onPlayerClick:function(e){if(this.heroIsLife){var t=e.getLocation(),o=this.hero.getPosition(),c=this.node.convertToWorldSpaceAR(o),i=t.x-c.x;i=Math.abs(i)/300;var n=this.node.convertToNodeSpaceAR(cc.v2(t.x,t.y)),r=cc.moveTo(i,cc.p(n.x,o.y));this.hero.stopAllActions(),this.hero.runAction(r)}},onCreateEnemy:function(){if(this.heroIsLife){var e=Math.random()*this.size.width;e=Math.ceil(e);var t=cc.instantiate(this.enemy);this.enemyArr.push(t),this.node.addChild(t);var o=this.node.convertToNodeSpaceAR(cc.v2(e,0));t.setPosition(o.x,this.size.height/2);var c=cc.moveTo(this.speed,cc.p(o.x,-(this.size.height/2+this.enemy.height*this.enemy.scaleY/2)));t.runAction(cc.sequence(c,cc.removeSelf()))}},onCreateBullet:function(){if(this.heroIsLife){var e=this.hero.getPosition(),t=cc.instantiate(this.bullet);this.bulletArr.push(t),this.node.addChild(t),t.setPosition(e.x,e.y),t.setLocalZOrder(1);var o=cc.moveTo(this.speed,cc.p(e.x,this.size.height/2+this.bullet.height*this.bullet.scaleY/2));t.runAction(cc.sequence(o,cc.removeSelf()))}},onLoad:function(){cc.director.getScene();this.size=cc.director.getVisibleSize(),cc.log(this.size);var e=this;this.hero.setLocalZOrder(2);var t=this.score_label.getPosition();this.score_label.setPosition(this.size.width/2*-1+50,t.y),cc.log(this.score_label.getPosition()),this.score_label.setLocalZOrder(4),this.node.on(cc.Node.EventType.TOUCH_START,function(t){e.onPlayerClick(t)}),this.schedule(function(){e.onCreateEnemy()},this.spCreateEnemy),this.schedule(function(){e.onCreateBullet()},this.spCreateBullet)},update:function(e){this.score_label.getComponent(cc.Label).string=this.score;for(var t in this.enemyArr){var o=!0;if(this.enemyArr[t].isChildOf(this.node)||cc.js.array.remove(this.enemyArr,this.enemyArr[t]),this.heroIsLife){var c=this.hero.getBoundingBoxToWorld();try{if(c.intersects(this.enemyArr[t].getBoundingBoxToWorld())){this.heroIsLife=!1,this.hero.stopAllActions();var i=this.enemyArr[t];i.stopAllActions();var n=cc.instantiate(this.boom);this.node.addChild(n),n.setPosition(this.hero.getPosition()),n.setLocalZOrder(3);var r=cc.instantiate(this.boom);this.node.addChild(r),r.setPosition(i.getPosition()),r.setLocalZOrder(3),i.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf())),this.hero.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf())),n.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf())),r.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf()))}}catch(s){cc.log(s.message)}}for(var l in this.bulletArr){this.bulletArr[l].isChildOf(this.node)||cc.js.array.remove(this.bulletArr,this.bulletArr[l]);try{var a=this.bulletArr[l].getBoundingBoxToWorld();if(a.intersects(this.enemyArr[t].getBoundingBoxToWorld())){cc.log("is intersects");var h=this.bulletArr[l],i=this.enemyArr[t];i.stopAllActions();var n=cc.instantiate(this.boom);this.node.addChild(n),n.setLocalZOrder(3),n.setPosition(i.getPosition()),h.removeFromParent(),i.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf())),n.runAction(cc.sequence(cc.delayTime(.5),cc.removeSelf())),cc.js.array.remove(this.enemyArr,i),cc.js.array.remove(this.bulletArr,h),o=!1,this.score+=this.enemy_score;break}}catch(s){cc.log(s.message)}}if(!o)break}}}),cc._RFpop()},{}],test:[function(e,t,o){"use strict";cc._RFpush(t,"003b2yGF25PYr7yQL111/WT","test"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){var e=cc.director.getVisibleSize();cc.log(e);var t=this.node.getChildByName("enmyp1");cc.log(t);var o=t.getNodeToWorldTransformAR();cc.log(o.tx+"  "+o.ty),this.schedule(function(){var e=t.getPosition(),o=1e3*Math.random();o=Math.ceil(o);var c=cc.instantiate(t);this.node.addChild(c);var i=this.node.convertToNodeSpace(cc.v2(o,e.y));cc.log(i),c.setPosition(i)},1)}}),cc._RFpop()},{}]},{},["test","enemyControl","bkControl","main","heroControl","boomControl"]);